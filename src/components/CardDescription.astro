---
import type { CollectionEntry } from 'astro:content'
import { Image } from 'astro:assets'

type Props = {
  item: CollectionEntry<'introduction'>
  index: number
  readMoreLabel: string
}

const { item, index, readMoreLabel } = Astro.props

function isOdd(num: number): boolean {
  return num % 2 !== 0
}

type Locale = 'en' | 'pl' | 'de'
const defaultLocale: Locale = 'en'

const currentLocale: Locale = (Astro.currentLocale ?? defaultLocale) as Locale

const BASE = (import.meta.env.BASE_URL ?? '/').replace(/\/$/, '')

function localeHref(path: string) {
  const normalized = path.startsWith('/') ? path : `/${path}`
  const prefix = currentLocale === defaultLocale ? '' : `/${currentLocale}`
  return `${BASE}${prefix}${normalized}`
}
---

<div class='flex flex-col items-center justify-center gap-8 sm:flex-row'>
  <div class={`w-full sm:w-[50%] ${isOdd(index) ? 'sm:order-2 order-1' : 'order-1'}`}>
    <Image src={item.data.imageUrl} alt={item.data.title} class='rounded' />
  </div>
  <div
    class={`bg-ss-white px-6 py-auto text-center sm:w-[50%] sm:px-0 sm:text-left ${isOdd(index) ? 'sm:order-1 order-2' : 'order-2'}`}
  >
    <div class='mx-auto px-6 sm:max-w-[500px]'>
      <h1
        class='font-fraunces text-ss-very-dark-desaturated-blue text-3xl font-bold text-yellow-800 sm:text-[2.5rem] sm:leading-tight'
      >
        {item.data.title}
      </h1>
      <p class='text-body text-ss-dark-grayish-blue mb-8 mt-6'>
        {item.data.description}
      </p>
      <div class='flex cursor-pointer flex-col items-center sm:items-start'>
        <a
          href={localeHref(`/introduction/${item.data.id}`)}
          class='whitespace-nowrap rounded-3xl border-2 border-yellow-800 px-4 py-2 text-xl uppercase text-yellow-800 focus:outline-none focus:ring-2 focus:ring-yellow-500'
        >
          {readMoreLabel}
        </a>
      </div>
    </div>
  </div>
</div>
